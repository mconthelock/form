/*! For license information please see redirect.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./assets/script/home/redirect.js":()=>{eval('// import { sendSession, setCkkey } from "../utils";\r\n// import { getIP, getUserGroup } from "../webservice";\r\n// import { getAuthen, setAuthen } from "../indexDB/application";\r\n// import { showMessage } from "../jFuntion";\r\n// import { getAuth } from "../login";\r\n// import Cookies from "js-cookie";\r\n// import { setUserAuth } from "../indexDB/setIndexDB";\r\n// import { getGroup } from "../indexDB/userAuth";\r\n// import { encryptText } from "../inc/_crypto";\r\n\r\n// $(document).ready(async function () {\r\n//     const id = `${$("#appid").val()}-${$("#empno").val()}`;\r\n//     const aunth = await getAuthen(id);\r\n//     console.log(1, aunth);\r\n\r\n//     const url = Cookies.get(id);\r\n//     if(url){\r\n//         console.log(2, url);\r\n//         window.location.href = `${process.env.APP_HOST}${atob(url)}`;\r\n//     }\r\n\r\n//     //Used to logged in to target app\r\n//     if (aunth != null) {\r\n//         const apps = aunth.data.apps;\r\n//         let group = aunth.data.group;\r\n//         if (apps.APP_LOGIN == 1 && group.length == 0) {\r\n//             window.location.href = `${process.env.APP_ENV}/authen/accessdinied`;\r\n//         } else {\r\n//             group = group[0];\r\n//             console.log(group);\r\n//         }\r\n//         // console.log(apps, group);\r\n\r\n//         // const chkDate = await getUserGroup(group.USERS_GROUP, apps.APP_ID);\r\n\r\n//         // if (new Date(chkDate[0].VUPDATE_DATE) <= new Date(group.VUPDATE_DATE)) {\r\n//         //   console.log("Old");\r\n//         //   const dir = await sendSession(\r\n//         //     `${process.env.APP_HOST}/${apps.APP_LOCATION}`,\r\n//         //     aunth.data\r\n//         //   );\r\n//         //   window.location.href = `/${apps.APP_LOCATION}/${dir.url}`;\r\n//         //   return;\r\n//         // }\r\n//     }\r\n\r\n//     //Try to bg login\r\n//     const auth = await getAuth($("#appid").val());\r\n//     const client = await getIP(); //Reduce -- 1\r\n//     const usr = {\r\n//         username: $("#users").val(),\r\n//         program: $("#appid").val(),\r\n//         auth: auth,\r\n//         // auth: $("#auth").val(),\r\n//         client: client.IP,\r\n//     };\r\n//     const user = await bglogin(usr);\r\n//     if (user.status === true) {\r\n//         const apps = user.message.apps;\r\n//         const location = apps.APP_LOCATION;\r\n\r\n\r\n//         await setUserAuth(id, user.message); // เก็บข้อมูล Session ลง IndexDB ให้เว็บปลายทางใช้\r\n//         const authKey = setCkkey($("#appid").val(),$("#empno").val());\r\n//         localStorage.setItem(location, authKey); // เก็บ key cookie ไว้ใน localStorage\r\n//         Cookies.set(authKey, encryptText(id, location), { expires: 0.5 / 24 }); // Set cookie for 30 minutes\r\n\r\n//         if(apps.APP_ID != \'28\'){\r\n//             const dir = await sendSession(\r\n//                 `${process.env.APP_HOST}/${location}`,\r\n//                 user.message\r\n//             );\r\n//             window.location.href = `${process.env.APP_HOST}/${location}/${dir.url}`;\r\n//         }else{\r\n//             const dir = user.message.group.length > 0 ? (user.message.group[0].GROUP_HOME ? user.message.group[0].GROUP_HOME : \'\') : \'\';\r\n//             window.location.href = `${process.env.APP_HOST}/${location}/${dir}`;\r\n//         }\r\n//         await setAuthen(id, user.message);\r\n//     }else {\r\n//         //ถ้าไม่มีสิทธิ์ให้ Redirect ไปยังหน้า Access Denied\r\n//         if(user.message.includes("no permission")){\r\n//             window.location.href = `${process.env.APP_ENV}/authen/accessdinied`;\r\n//             return;\r\n//         }\r\n//     }\r\n// });\r\n\r\n// function bglogin(data) {\r\n//     return new Promise((resolve) => {\r\n//         $.ajax({\r\n//             type: "post",\r\n//             url: `${process.env.APP_API}/api/authentication/directlogin/`,\r\n//             dataType: "json",\r\n//             data: data,\r\n//             success: function (response) {\r\n//                 resolve(response);\r\n//             },\r\n//         });\r\n//     });\r\n// }\r\n\n\n//# sourceURL=webpack:///./assets/script/home/redirect.js?')}},__webpack_exports__={};__webpack_modules__["./assets/script/home/redirect.js"]()})();